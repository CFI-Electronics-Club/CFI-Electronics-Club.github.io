<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Electronics Club, IIT Madras</title>
    <link rel="icon" href="../../../images/elec.png">
    <link rel="stylesheet" href="../../../css/articles_light.css" />
    <link rel="stylesheet" href="../../../css/articles.css" />
    <link rel="stylesheet" href="../../../css/checkbox.css" />
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.5/build/pure-min.css"
        integrity="sha384-LTIDeidl25h2dPxrB2Ekgc9c7sEC3CWGM6HeFmuDNUjX76Ert4Z4IY714dhZHPLd" crossorigin="anonymous">
    <link rel="stylesheet" href="../styles.css">

</head>

<body>

    <div id="layout">
        <!-- Menu toggle -->
        <div>
            <a href="#menu" id="menuLink" class="menu-link active">
                <!-- Hamburger icon -->
                <span></span>
            </a>
            <div style='position: fixed; right: 10px;'>
                <img src="https://img.icons8.com/doodle/48/000000/sun--v1.png" style="width:35px" />

                <label class="switch" style="top: -10px">
                    <input type="checkbox" id='checkbox' checked onclick="toggleTheme()">
                    <span class="slider round"></span>
                </label>
                <img src="https://img.icons8.com/plasticine/100/000000/crescent-moon.png" style="width:35px" />
            </div>
        </div>

        <div id="menu" style='font-family: "Archivo Black", "sans-serif"; background-color: #1a1a2e;'>
            <div class="pure-menu">
                <a class="pure-menu-heading"
                    style='padding: 20px 0; background-color: #1a1a2e; text-align: center; display: flex; align-items: center; font-family: "Archivo Black", sans-serif;text-decoration: none; '
                    href="../../../index.html">
                    <img src="../../../images/elec.png" alt="" style='width: 100px'>
                    Electronics <br> Club
                </a>

                <ul class="pure-menu-list">
                    <li class=""><a href="../Getting Started.html" class="pure-menu-link">Getting Started</a></li>
                    <ul class="pure-menu-list">
                        <label for="drop" class="toggle" style="padding-left: 10px;">Basics</label>
                        <input type="checkbox" id="drop" />
                        <ul class="pure-menu-item menu">
                            <li class="">
                                <a href="Arduino Installation.html" style="padding-left:20px" class="pure-menu-link">Arduino Installation</a>
                            </li>
                            <li class="">
                                <a href="Fundamentals.html" style="padding-left:20px" class="pure-menu-link">Fundamentals</a>
                            </li>
                            <li class="">
                                <a href="Analog vs Digital.html" style="padding-left:20px" class="pure-menu-link">Analog vs Digital</a>
                            </li>
                            
                            <li class="">
                                <a href="Pulse Width Modulation.html" style="padding-left:20px" class="pure-menu-link">Pulse Width Modulation</a>
                            </li>
                            <li class="">
                                <a href="Push buttons.html" style="padding-left:20px" class="pure-menu-link">Push buttons</a>
                            </li>
                            <li class="">
                                <a href="Capactive Touch Pins.html" style="padding-left:20px" class="pure-menu-link">Capactive Touch Pins</a>
                            </li>
                            <li class="">
                                <a href="PullUp-Down Resistors.html" style="padding-left:20px" class="pure-menu-link">Pull Up/Down Resistors</a>
                            </li><li class="">
                                <a href="Serial Bluetooth.html" style="padding-left:20px" class="pure-menu-link">Serial Bluetooth</a>
                            </li><li class="">
                                <a href="Communication Protocols.html" style="padding-left:20px" class="pure-menu-link">Communication Protocols</a>
                            </li><li class="">
                                <a href="MicroPython Installation.html" style="padding-left:20px" class="pure-menu-link">MicroPython Installation</a>
                            </li>
                        </ul>
                    </ul>
                    <ul class="pure-menu-list">
                        <label for="drop1" class="toggle" style="padding-left: 10px;">Easy projects</label>
                        <input type="checkbox" id="drop1" />
                        <ul class="pure-menu-item menu">
                            <li class="">
                                <a href="Bluetooth Keyboard.html" style="padding-left:20px" class="pure-menu-link">Bluetooth Keyboard</a>
                            </li>
                            <li class=""><a style="padding-left:20px" href="Cloud Server.html" class="pure-menu-link">Cloud Server</a>
                            </li>
                            <li class=""><a style="padding-left:20px" href="Deep Sleep.html" class="pure-menu-link">Deep Sleep</a>
                            </li>
                            <li class="">
                                <a href="Dual Core Processing.html" style="padding-left:20px" class="pure-menu-link">Dual Core Processing</a>
                            </li>
                            <li class="">
                                <a href="LDR sensor.html" style="padding-left:20px" class="pure-menu-link">LDR sensor</a>
                            </li>
                            <li class="">
                                <a href="LED Web Server.html" style="padding-left:20px" class="pure-menu-link">LED Web Server</a>
                            </li>
                            <li class="">
                                <a href="NeoPixel LED Control.html" style="padding-left:20px" class="pure-menu-link">NeoPixel LED Control</a>
                            </li><li class="">
                                <a href="OLED display.html" style="padding-left:20px" class="pure-menu-link">OLED display</a>
                            </li>
                            
                            <li class="">
                                <a href="Realtime clock.html" style="padding-left:20px" class="pure-menu-link">Realtime clock</a>
                            </li>
                            
                            <li class="">
                                <a href="Web Server Game.html" style="padding-left:20px" class="pure-menu-link">Web Server Game</a>
                            </li>

                            
                        </ul>
                        <label for="drop2" class="toggle" style="padding-left: 10px;">Moderate or Difficult projects</label>
                        <input type="checkbox" id="drop2" />
                        <ul class="pure-menu-item menu">

                            <li class=""><a style="padding-left:20px" href="BLE Control.html" class="pure-menu-link">BLE Control</a>
                            </li>
                            <li class="">
                                <a href="Email Alert.html" style="padding-left:20px" class="pure-menu-link">Email Alert</a>
                            </li>
                           
                            <li class=""><a href="FlappyBird.html" style="padding-left:20px"
                                class="pure-menu-link">FlappyBird</a></li>
                           
                            <li class=""><a style="padding-left:20px" href="Instagram Follower Counter.html" class="pure-menu-link">Instagram Follower Counter</a>
                            </li>
                            <li class=""><a style="padding-left:20px" href="Joystick.html" class="pure-menu-link">Joystick</a>
                            </li>
                            <li class=""><a style="padding-left:20px" href="Pulse Oximeter.html" class="pure-menu-link">Pulse Oximeter</a>
                            </li>
                           
                                
                                <li class=""><a style="padding-left:20px" href="Telegram-Motion detection.html" class="pure-menu-link">Telegram-Motion detection</a>
                                </li>
                                <li class=""><a style="padding-left:20px" href="Telegram-RGB.html" class="pure-menu-link">Telegram-RGB</a>
                                </li>
                        </ul>

                    </ul>
                    </li>

                </ul>
            </div>
        </div>

        <div id="main">

            <div class="header">
                <h1 id="esp32-as-bluetooth-keyboard">ESP32 as Bluetooth Keyboard</h1>

            </div>

            <div class="content">

<h2 id="description-">Description:</h2>
<ul>
<li>ESP32 has BLE support thus it can be used as Bluetooth Keyboard with open source library</li>
<li>Compatible with Windows,Linux,Android,MacOSX,iOS
</li>
</ul>
<h2 id="concept-">Concept:</h2>
<p>Making use of the Blutooth Capability of ESP32 board,we are going to send keystrokes to the device we want to. Various use cases are possible:</p>
<ul>
<li>Automating any set of actions</li>
<li>Taking a photo with a hand trigger </li>
<li>and many more</li>
</ul>
</li>
</ul>
<h2 id="parts-required-">Parts Required:</h2>
<ul>
<li>ESP32 Board</li>
<li>Push buttons</li>
<li>Jumper wires</li></ul><h2 id="schematics-">Schematics:</h2>
<img src="https://user-images.githubusercontent.com/55990571/113199303-964e8a00-9284-11eb-800e-b3ee8b8a1a75.png" alt="BLE_KEYBOARD"></li>
</ul>
<h2 id="instructions-">Instructions:</h2>
<ol>
<li>Load Arduino IDE</li>
<li>Install the library from here (<a href="https://github.com/T-vK/ESP32-BLE-Keyboard/releases">https://github.com/T-vK/ESP32-BLE-Keyboard/releases</a>)</li>
<li>Add the .ZIP library from the sketch menu</li>
<li>Make the connections according to the schematic</li>
<li>Try out the below codes:</li>
</ol>
<p><strong><em>Space bar button</em></strong></p>
<ul>
<li>Upload the below code</li>
<li>Connect with PC using Bluetooth</li>
<li>Open &quot;chrome://dino&quot; and start playing </li>
</ul>
<pre><code><span class="hljs-comment">//D13       Button pin</span>
<span class="hljs-comment">//3.3V      Connected to the other leg of the button</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;BleKeyboard.h&gt;</span></span>
<span class="hljs-comment">//Set the name of the bluetooth keyboard (that shows up in the bluetooth menu of your device)</span>
BleKeyboard bleKeyboard(<span class="hljs-string">"ESP_KEYBOARD"</span>);

<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> buttonPin = <span class="hljs-number">13</span>;
<span class="hljs-comment">//Set the old button state to be LOW/false; which means not pressed</span>
<span class="hljs-keyword">boolean</span> oldPinState = <span class="hljs-literal">LOW</span>;

<span class="hljs-keyword">void</span> <span class="hljs-built_in">setup</span>() {
  <span class="hljs-comment">//Start the Serial communication (with the computer at 115200 bits per second)</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-comment">//Send this message to the computer</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Starting BLE work!"</span>);
  <span class="hljs-comment">//Begin the BLE keyboard/start advertising the keyboard (so phones can find it)</span>
  bleKeyboard.<span class="hljs-built_in">begin</span>();
  <span class="hljs-comment">//Make the button pin an INPUT_PULLDOWN pin, which means that it is normally LOW, untill it is pressed/ connected to the 3.3V</span>
  <span class="hljs-built_in">pinMode</span>(buttonPin, INPUT_PULLDOWN);
}

<span class="hljs-keyword">void</span> <span class="hljs-built_in">loop</span>() {

  <span class="hljs-built_in">if</span> (bleKeyboard.isConnected()) {
    <span class="hljs-comment">//if the keyboard is connected to a device</span>
    <span class="hljs-built_in">if</span> (<span class="hljs-built_in">digitalRead</span>(buttonPin) == <span class="hljs-literal">HIGH</span>) {
      <span class="hljs-comment">//If the button pin is pressed (since it is pulled down, it is pressed when it is high)</span>
      <span class="hljs-built_in">if</span> (oldPinState == <span class="hljs-literal">LOW</span>) {
        <span class="hljs-comment">//if the old Pin state was LOW and the button pin is HIGH than...</span>
        <span class="hljs-comment">//send the spacebar</span>
        bleKeyboard.<span class="hljs-built_in">print</span>(<span class="hljs-string">" "</span>);
      }
      oldPinState = <span class="hljs-literal">HIGH</span>;
    } <span class="hljs-built_in">else</span> {
      oldPinState = <span class="hljs-literal">LOW</span>;
    }
  }
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">10</span>);
}
</code></pre><p><img src="https://user-images.githubusercontent.com/55990571/113268477-0a287b00-92f5-11eb-830b-f7b92f53a6fa.gif" alt="BLE_KEYBOARD_gif"></p>
<p><strong><em>Play/Pause button</em></strong></p>
<ul>
<li>Upload the below code</li>
<li>Connect with Phone using Bluetooth</li>
<li>Play your favourite music playlist,and now you can play pause the song using the ESP_keyboard</li>
</ul>
<pre><code>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;BleKeyboard.h&gt;</span></span>
<span class="hljs-comment">//Set the name of the bluetooth keyboard (that shows up in the bluetooth menu of your device)</span>
BleKeyboard bleKeyboard(<span class="hljs-string">"ESP_KEYBOARD"</span>);

<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> buttonPin = <span class="hljs-number">13</span>;
<span class="hljs-comment">//Set the old button state to be LOW/false; which means not pressed</span>
<span class="hljs-keyword">boolean</span> oldPinState = <span class="hljs-literal">LOW</span>;
<span class="hljs-keyword">int</span> state = <span class="hljs-number">0</span>;

<span class="hljs-keyword">void</span> <span class="hljs-built_in">setup</span>() {
  <span class="hljs-comment">//Start the Serial communication (with the computer at 115200 bits per second)</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-comment">//Send this message to the computer</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Starting BLE work!"</span>);
  <span class="hljs-comment">//Begin the BLE keyboard/start advertising the keyboard (so phones can find it)</span>
  bleKeyboard.<span class="hljs-built_in">begin</span>();
  <span class="hljs-comment">//Make the button pin an INPUT_PULLDOWN pin, which means that it is normally LOW, untill it is pressed/ connected to the 3.3V</span>
  <span class="hljs-built_in">pinMode</span>(buttonPin, INPUT_PULLDOWN);
}

<span class="hljs-keyword">void</span> <span class="hljs-built_in">loop</span>() {

  <span class="hljs-built_in">if</span> (bleKeyboard.isConnected()) {
<span class="hljs-built_in">if</span> (state == <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">digitalRead</span>(buttonPin) == <span class="hljs-literal">HIGH</span>) {
    state = <span class="hljs-number">1</span>;
    bleKeyboard.<span class="hljs-built_in">write</span>(KEY_MEDIA_PLAY_PAUSE);
  }
  <span class="hljs-built_in">if</span> (state == <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">digitalRead</span>(buttonPin) == <span class="hljs-literal">LOW</span>) {   
    state = <span class="hljs-number">0</span>;
  }
  }
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">10</span>);
}
</code></pre>

            </div>
        </div>
    </div>
    <script src="../articles.js"></script>

    <script src="../ui.js"></script>

</body>

</html>